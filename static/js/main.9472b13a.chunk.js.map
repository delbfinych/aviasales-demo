{"version":3,"sources":["Logo.svg","components/ticket-list-item/index.js","components/ticket-list/index.js","components/currency-filter/index.js","components/stops-filter/index.js","service.js","components/spinner/index.js","components/app/index.js","index.js"],"names":["module","exports","__webpack_require__","p","serializeDate","date","arr","split","day","month","year","dayWeek","Date","getDay","concat","TicketListItem","_ref","number","currency","item","origin","origin_name","destination","destination_name","departure_date","departure_time","arrival_date","arrival_time","stops","carrier","price","react_default","a","createElement","className","src","logo","alt","value","sign","toFixed","toString","slice","translateCurrency","indexOf","maxId","TicketList","renderItems","items","map","components_ticket_list_item","key","filterButtons","name","label","CurrencyFilter","filter","onCurrencyChange","buttons","_ref2","classNames","type","onClick","filterInputs","StopsFilter","onStopsFilter","inputs","isChecked","Fragment","checked","onChange","length","splice","idx","Object","toConsumableArray","push","unshift","onChangeHandler","Service","getResource","_callee","url","res","regenerator_default","wrap","_context","prev","next","fetch","sent","ok","Error","status","json","abrupt","stop","this","getTickets","_callee2","_context2","_this","tickets","Spinner","App","service","state","currencyValue","filters","isLoading","onFilter","setState","OnCurrencyChange","_this2","then","_this$state","components_spinner","visibleItems","sort","b","components_currency_filter","components_stops_filter","components_ticket_list","Component","ReactDOM","render","components_app","document","getElementById"],"mappings":"kFAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,oUCUxC,SAASC,EAAcC,GACrB,IAeIC,EAAMD,EAAKE,MAAM,KACjBC,EAAMF,EAAI,GACZG,EAAQH,EAAI,GACZI,EAAO,KAAOJ,EAAI,GAChBK,EAAU,IAAIC,KAAKF,EAAMD,EAAQ,EAAGD,GAAKK,SAE7C,SAAAC,OAAUN,EAAV,KAAAM,OArBa,CACX,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,sBASsBL,EAAQ,GAAhC,KAAAK,OAAsCJ,EAAtC,MAAAI,OAPW,CAAC,eAAM,eAAM,eAAM,eAAM,eAAM,eAAM,gBAOIH,IAqBtD,IAmDeI,EAnDQ,SAAAC,GAAwB,IAjDvBC,EAiDEC,EAAqBF,EAArBE,SAAUC,EAAWH,EAAXG,KAEhCC,EAWED,EAXFC,OACAC,EAUEF,EAVFE,YACAC,EASEH,EATFG,YACAC,EAQEJ,EARFI,iBACAC,EAOEL,EAPFK,eACAC,EAMEN,EANFM,eACAC,EAKEP,EALFO,aACAC,EAIER,EAJFQ,aAEAC,GAEET,EAHFU,QAGEV,EAFFS,OACAE,EACEX,EADFW,MAEF,OACEC,EAAAC,EAAAC,cAAA,MAAIC,UAAU,oBACZH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,2BACbH,EAAAC,EAAAC,cAAA,OAAKE,IAAKC,IAAMF,UAAU,yBAAyBG,IAAI,KACvDN,EAAAC,EAAAC,cAAA,UAAQC,UAAU,UAChBH,EAAAC,EAAAC,cAAA,QAAMC,UAAU,eAAhB,qDArCV,SAA2BhB,EAAUoB,GACnC,IAAIC,EAAO,UACX,MAAiB,QAAbrB,EAA2BoB,EAAQC,GACtB,QAAbrB,IACFoB,GAAS,MACTC,EAAO,MAEQ,QAAbrB,IACFoB,GAAS,MACTC,EAAO,WAGPD,EACGE,QAAQ,GACRC,WACAC,MAAM,GAAI,GAAKH,GAuBCI,CAAkBzB,EAAUY,MAI7CC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,6BACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,6BACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,4BACbH,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QAAQT,EAAxB,KACAM,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QACbd,EADH,KACaC,GAEbU,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QAAQ9B,EAAcoB,GAAtC,MAEFO,EAAAC,EAAAC,cAAA,OAAKC,UAAU,2BACbH,EAAAC,EAAAC,cAAA,YACGL,EADH,IAlFN,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAGgB,SADD3B,EAoFcW,GAnFI,KAAO,EAAU,yDAChDX,EAAS,KAAO,EAAU,yDAC5B,2DAoFCc,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iCACbH,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QAAhB,IAAyBP,EAAzB,KACAI,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QACbX,EADH,KACuBD,GAEvBS,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QAAQ9B,EAAcsB,GAAtC,UC5FRmB,SAAQ,KAUGC,EARI,SAAA9B,GAAyB,IAAtBE,EAAsBF,EAAtBE,SACd6B,EADoC/B,EAAZgC,MACJC,IAAI,SAAA9B,GAC5B,OAAOY,EAAAC,EAAAC,cAACiB,EAAD,CAAgBhC,SAAUA,EAAUiC,IAAKN,IAAS1B,KAAMA,MAGjE,OAAOY,EAAAC,EAAAC,cAAA,cAAMc,EAAN,MCRHK,eAAgB,CACpB,CAAEC,KAAM,MAAOC,MAAO,OACtB,CAAED,KAAM,MAAOC,MAAO,OACtB,CAAED,KAAM,MAAOC,MAAO,SAyBTC,EAtBQ,SAAAvC,GAAkC,IAA/BwC,EAA+BxC,EAA/BwC,OAAQC,EAAuBzC,EAAvByC,iBAC1BC,EAAUN,EAAcH,IAAI,SAAAU,GAAqB,IAAlBN,EAAkBM,EAAlBN,KAAMC,EAAYK,EAAZL,MAEnCM,EAAa,QADFP,IAASG,EACc,SAAW,IACnD,OACEzB,EAAAC,EAAAC,cAAA,UACEkB,IAAKE,EACLQ,KAAK,SACLC,QAAS,kBAAML,EAAiBJ,IAChCnB,UAAW0B,GAEVN,KAIP,OACEvB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACbH,EAAAC,EAAAC,cAAA,oDACAF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aAAawB,YCzB5BK,SAAe,CACnB,CAAEV,MAAO,EAAGC,MAAO,sBACnB,CAAED,KAAM,EAAGC,MAAO,6EAClB,CAAED,KAAM,EAAGC,MAAO,mFAClB,CAAED,KAAM,EAAGC,MAAO,6EAClB,CAAED,KAAM,EAAGC,MAAO,+EAiDLU,EA9CK,SAAAhD,GAA+B,IAA5BwC,EAA4BxC,EAA5BwC,OAAQS,EAAoBjD,EAApBiD,cAsBvBC,EAASH,EAAad,IAAI,SAAAU,GAAqB,IAAlBN,EAAkBM,EAAlBN,KAAMC,EAAYK,EAAZL,MACjCa,EAAYX,EAAOZ,QAAQS,IAAS,EAE1C,OACEtB,EAAAC,EAAAC,cAACF,EAAAC,EAAMoC,SAAP,CAAgBjB,IAAKE,GACnBtB,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,SACEoC,QAASF,EACTG,SAAU,kBA7BI,SAACjB,EAAMgB,GAC7B,IAAI/D,EAAMkD,EAEV,IAAc,IAAVH,GAAegB,EACjB/D,EAAM,QACD,IAAc,IAAV+C,GAAgBgB,EAEpB,GAAIA,EAAS,CACC,IAAf/D,EAAIiE,QACNjE,EAAIkE,OAAOlE,EAAIsC,SAAS,GAAI,GAE9B,IAAI6B,EAAMnE,EAAIsC,QAAQS,GACtB/C,EAAG,GAAAQ,OAAA4D,OAAAC,EAAA,EAAAD,CAAOpE,EAAIoC,MAAM,EAAG+B,IAApBC,OAAAC,EAAA,EAAAD,CAA6BpE,EAAIoC,MAAM+B,EAAM,UAEhDnE,EAAIsE,KAAKvB,GACU,IAAf/C,EAAIiE,SAAqC,IAArBjE,EAAIsC,SAAS,IAAWtC,EAAIuE,SAAS,QAT7DvE,EAAM,EAAE,EAAG,EAAG,EAAG,EAAG,GAYtB2D,EAAc3D,GAWUwE,CAAgBzB,EAAMc,IACtCN,KAAK,aAEP9B,EAAAC,EAAAC,cAAA,QAAMC,UAAU,aAChBH,EAAAC,EAAAC,cAAA,YAAOqB,OAKf,OACEvB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACbH,EAAAC,EAAAC,cAAA,QAAMC,UAAU,UAAhB,uHACCgC,2BCpDca,mDACnBC,kDAAc,SAAAC,EAAMC,GAAN,IAAAC,EAAA,OAAAC,EAAApD,EAAAqD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACMC,MAAMP,GADZ,WACNC,EADMG,EAAAI,MAGHC,GAHG,CAAAL,EAAAE,KAAA,cAIJ,IAAII,MAAJ,mBAAA9E,OAA6BoE,EAA7B,eAAApE,OAA8CqE,EAAIU,SAJ9C,cAAAP,EAAAE,KAAA,EAMCL,EAAIW,OANL,cAAAR,EAAAS,OAAA,SAAAT,EAAAI,MAAA,wBAAAJ,EAAAU,SAAAf,EAAAgB,oEASdC,iDAAa,SAAAC,EAAMjB,GAAN,IAAAC,EAAA,OAAAC,EAAApD,EAAAqD,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,cAAAY,EAAAZ,KAAA,EACOa,EAAKrB,YAAYE,GADxB,cACLC,EADKiB,EAAAV,KAAAU,EAAAL,OAAA,SAEJZ,EAAImB,SAFA,wBAAAF,EAAAJ,SAAAG,EAAAF,gECeAM,SArBC,WACd,OACExE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,gBCuDOuE,6MAjEbC,QAAU,IAAI1B,IACd2B,MAAQ,CACNJ,QAAS,GACTK,cAAe,MACfC,QAAS,CAAC,GACVC,WAAW,KAWbC,SAAW,SAAA9D,GAAS,IACV4D,EAAYP,EAAKK,MAAjBE,QACR,OAAIA,EAAQhE,SAAS,IAAM,EAClBI,EAEFA,EAAMQ,OAAO,SAAArC,GAClB,OAAOyF,EAAQhE,QAAQzB,EAAKS,QAAU,OAI1CqC,cAAgB,SAAA3D,GACd+F,EAAKU,SAAS,CAAEH,QAAStG,OAG3B0G,iBAAmB,SAAA1E,GACjB+D,EAAKU,SAAS,CACZJ,cAAerE,wFAxBC,IAAA2E,EAAAhB,KAClBA,KAAKQ,QACFP,WACC,0FAEDgB,KAAK,SAAAZ,GAAO,OAAIW,EAAKF,SAAS,CAAET,UAASO,WAAW,uCAuBhD,IAAAM,EAC8ClB,KAAKS,MAApDJ,EADCa,EACDb,QAASM,EADRO,EACQP,QAASD,EADjBQ,EACiBR,cACxB,GAFOQ,EACgCN,UACxB,OAAO9E,EAAAC,EAAAC,cAACmF,EAAD,MAEtB,IAAMC,EAAepB,KAAKa,SACxBR,EAAQgB,KAAK,SAACtF,EAAGuF,GAAJ,OAAUvF,EAAEF,MAAQyF,EAAEzF,SAErC,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACbH,EAAAC,EAAAC,cAACuF,EAAD,CACEhE,OAAQmD,EACRlD,iBAAkBwC,KAAKe,mBAEzBjF,EAAAC,EAAAC,cAACwF,EAAD,CACEjE,OAAQoD,EACR3C,cAAegC,KAAKhC,kBAI1BlC,EAAAC,EAAAC,cAACyF,EAAD,CAAYxG,SAAUyF,EAAe3D,MAAOqE,aA3DpCM,aCJlBC,IAASC,OAAO9F,EAAAC,EAAAC,cAAC6F,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.9472b13a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Logo.3f152699.svg\";","import React from \"react\";\nimport \"./ticket-list-item.css\";\nimport logo from \"../../Logo.svg\";\n\nfunction serializeStops(number) {\n  if ([0, 5, 6, 7, 8, 9].indexOf(number % 10) > -1) return \"ПЕРЕСАДОК\";\n  else if (number % 10 === 1) return \"ПЕРЕСАДКА\";\n  return \"ПЕРЕСАДКИ\";\n}\n\nfunction serializeDate(date) {\n  let months = [\n    \"янв\",\n    \"фев\",\n    \"мар\",\n    \"апр\",\n    \"май\",\n    \"июн\",\n    \"июл\",\n    \"авг\",\n    \"сен\",\n    \"окт\",\n    \"ноя\",\n    \"дек\"\n  ];\n  let week = [\"Вс\", \"Пн\", \"Вт\", \"Ср\", \"Чт\", \"Пт\", \"Сб\"];\n  let arr = date.split(\".\");\n  let day = arr[0],\n    month = arr[1],\n    year = \"20\" + arr[2];\n  let dayWeek = new Date(year, month - 1, day).getDay();\n\n  return `${day} ${months[month - 1]} ${year}, ${week[dayWeek]}`;\n}\n\nfunction translateCurrency(currency, value) {\n  let sign = \" ₽\";\n  if (currency === \"rub\") return value + sign;\n  if (currency === \"usd\") {\n    value /= 65.61;\n    sign = \" $\";\n  }\n  if (currency === \"eur\") {\n    value /= 74.88;\n    sign = \" €\";\n  }\n  return (\n    value\n      .toFixed(3)\n      .toString()\n      .slice(0, -1) + sign\n  );\n}\nconst TicketListItem = ({ currency, item }) => {\n  const {\n    origin,\n    origin_name,\n    destination,\n    destination_name,\n    departure_date,\n    departure_time,\n    arrival_date,\n    arrival_time,\n    carrier,\n    stops,\n    price\n  } = item;\n  return (\n    <li className=\"ticket-list-item\">\n      <div className=\"ticket-list-item__offer\">\n        <img src={logo} className=\"ticket-list-item__logo\" alt=\"\" />\n        <button className=\"buyBtn\">\n          <span className=\"buyBtn-text\">\n            Купить за {translateCurrency(currency, price)}\n          </span>\n        </button>\n      </div>\n      <div className=\"ticket-list-item__details\">\n        <div className=\"ticket-list-item__content\">\n          <div className=\"ticket-list-item__origin\">\n            <span className=\"time\">{departure_time} </span>\n            <span className=\"name\">\n              {origin}, {origin_name}\n            </span>\n            <span className=\"date\">{serializeDate(departure_date)} </span>\n          </div>\n          <div className=\"ticket-list-item__stops\">\n            <span>\n              {stops} {serializeStops(stops)}\n            </span>\n          </div>\n          <div className=\"ticket-list-item__destination\">\n            <span className=\"time\"> {arrival_time} </span>\n            <span className=\"name\">\n              {destination_name}, {destination}\n            </span>\n            <span className=\"date\">{serializeDate(arrival_date)} </span>\n          </div>\n        </div>\n      </div>\n    </li>\n  );\n};\n\nexport default TicketListItem;\n","import React from \"react\";\nimport TicketListItem from \"../ticket-list-item\";\nimport \"./ticket-list.css\";\n\nlet maxId = 100;\n\nconst TicketList = ({ currency, items }) => {\n  const renderItems = items.map(item => {\n    return <TicketListItem currency={currency} key={maxId++} item={item} />;\n  });\n\n  return <ul> {renderItems} </ul>;\n};\n\nexport default TicketList;\n","import React from \"react\";\nimport \"./currency-filter.css\";\n\nconst filterButtons = [\n  { name: \"rub\", label: \"RUB\" },\n  { name: \"usd\", label: \"USD\" },\n  { name: \"eur\", label: \"EUR\" }\n];\n\nconst CurrencyFilter = ({ filter, onCurrencyChange }) => {\n  const buttons = filterButtons.map(({ name, label }) => {\n    const isActive = name === filter;\n    const classNames = \"btn \" + (isActive ? \"active\" : \"\");\n    return (\n      <button\n        key={name}\n        type=\"button\"\n        onClick={() => onCurrencyChange(name)}\n        className={classNames}\n      >\n        {label}\n      </button>\n    );\n  });\n  return (\n    <div className=\"currency-filter\">\n      <span>валюта</span>\n      <div className=\"btn-group\">{buttons}</div>\n    </div>\n  );\n};\nexport default CurrencyFilter;\n","import React from \"react\";\nimport \"./stops-filter.css\";\nconst filterInputs = [\n  { name: -1, label: \"Все\" },\n  { name: 0, label: \"Без пересадок\" },\n  { name: 1, label: \"Одна пересадка\" },\n  { name: 2, label: \"Две пересадки\" },\n  { name: 3, label: \"Три пересадки\" }\n];\n\nconst StopsFilter = ({ filter, onStopsFilter }) => {\n  const onChangeHandler = (name, checked) => {\n    let arr = filter;\n\n    if (name === -1 && checked) {\n      arr = [];\n    } else if (name === -1 && !checked) {\n      arr = [-1, 0, 1, 2, 3];\n    } else if (checked) {\n      if (arr.length === 5) {\n        arr.splice(arr.indexOf(-1), 1);\n      }\n      let idx = arr.indexOf(name);\n      arr = [...arr.slice(0, idx), ...arr.slice(idx + 1)];\n    } else {\n      arr.push(name);\n      if (arr.length === 4 && arr.indexOf(-1) === -1) arr.unshift(-1);\n    }\n\n    onStopsFilter(arr);\n  };\n\n  const inputs = filterInputs.map(({ name, label }) => {\n    const isChecked = filter.indexOf(name) > -1;\n\n    return (\n      <React.Fragment key={name}>\n        <label>\n          <input\n            checked={isChecked}\n            onChange={() => onChangeHandler(name, isChecked, false)}\n            type=\"checkbox\"\n          />\n          <span className=\"checkbox\" />\n          <span>{label}</span>\n        </label>\n      </React.Fragment>\n    );\n  });\n  return (\n    <div className=\"stops-filter\">\n      <span className=\"amount\">КОЛИЧЕСТВО ПЕРЕСАДОК</span>\n      {inputs}\n    </div>\n  );\n};\nexport default StopsFilter;\n","export default class Service {\n  getResource = async url => {\n    const res = await fetch(url);\n\n    if (!res.ok) {\n      throw new Error(`Could not fetch ${url}, received ${res.status}`);\n    }\n    return await res.json();\n  };\n\n  getTickets = async url => {\n    const res = await this.getResource(url);\n    return res.tickets;\n  };\n}\n","import React from \"react\";\n\nimport \"./spinner.css\";\n\nconst Spinner = () => {\n  return (\n    <div className=\"lds-css ng-scope\">\n      <div className=\"lds-spinner\">\n        <div />\n        <div />\n        <div />\n        <div />\n        <div />\n        <div />\n        <div />\n        <div />\n        <div />\n        <div />\n        <div />\n        <div />\n      </div>\n    </div>\n  );\n};\n\nexport default Spinner;\n","import React, { Component } from \"react\";\nimport TicketList from \"../ticket-list\";\nimport \"./app.css\";\nimport CurrencyFilter from \"../currency-filter\";\nimport StopsFilter from \"../stops-filter\";\nimport Service from \"../../service\";\nimport Spinner from \"../spinner\";\n\nclass App extends Component {\n  service = new Service();\n  state = {\n    tickets: [],\n    currencyValue: \"rub\",\n    filters: [0], // w/o stops as default\n    isLoading: true\n  };\n\n  componentDidMount() {\n    this.service\n      .getTickets(\n        \"https://raw.githubusercontent.com/KosyanMedia/test-tasks/master/aviasales/tickets.json\"\n      )\n      .then(tickets => this.setState({ tickets, isLoading: false }));\n  }\n\n  onFilter = items => {\n    const { filters } = this.state;\n    if (filters.indexOf(-1) > -1) {\n      return items;\n    }\n    return items.filter(item => {\n      return filters.indexOf(item.stops) > -1;\n    });\n  };\n\n  onStopsFilter = arr => {\n    this.setState({ filters: arr });\n  };\n\n  OnCurrencyChange = value => {\n    this.setState({\n      currencyValue: value\n    });\n  };\n\n  render() {\n    let { tickets, filters, currencyValue, isLoading } = this.state;\n    if (isLoading) return <Spinner />;\n\n    const visibleItems = this.onFilter(\n      tickets.sort((a, b) => a.price - b.price)\n    );\n    return (\n      <div className=\"App\">\n        <div className=\"conteiner\">\n          <div className=\"sidebar\">\n            <div className=\"filters\">\n              <CurrencyFilter\n                filter={currencyValue}\n                onCurrencyChange={this.OnCurrencyChange}\n              />\n              <StopsFilter\n                filter={filters}\n                onStopsFilter={this.onStopsFilter}\n              />\n            </div>\n          </div>\n          <TicketList currency={currencyValue} items={visibleItems} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/app\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}